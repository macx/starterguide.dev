---
title: Probleme beheben
description: Hier findest du Lösungen für häufige Probleme bei der Installation und Nutzung von Node.js und npm.
---

import Lead from '@components/Lead.astro'
import { Tabs, TabItem, Steps, Aside } from '@astrojs/starlight/components'

<Lead>
  Es ist ganz normal, dass bei der Entwicklung mit Node.js und npm Fehler
  auftreten. Hier erklären wir dir, warum das passiert und wie du die häufigsten
  Probleme löst.
</Lead>

Fehler können viele Ursachen haben: fehlende Berechtigungen, blockierte Ports, inkompatible Versionen oder fehlende System-Tools. Wir haben die Lösungen für die häufigsten Probleme hier gesammelt.

## Häufige Fehler

Hier findest du die Fehler, die am häufigsten auftreten, sortiert nach Wahrscheinlichkeit.

### Berechtigungen & Skripte

Oft scheitert es schon ganz am Anfang: Du darfst keine Skripte ausführen oder hast keine Schreibrechte.

<Tabs>
  <TabItem label="macOS">
    **Fehlende Rechte (EACCES)**

    Auf manchen Rechnern kommt es bei Node unter Umständen zu Problemen bei der Rechtevergabe. Dies kannst du mit dem folgenden Befehl beheben:

    ```shell
    sudo chown -R $(whoami) $(npm config get prefix)/{lib/node_modules,bin,share}
    ```

  </TabItem>

  <TabItem label="Windows">
    **Skripte können nicht ausgeführt werden**

    Windows blockiert standardmäßig das Ausführen von Skripten in der PowerShell. Das sieht dann etwas so aus:

    ![](../../../assets/npm-error.png)

    Um das zu ändern, öffne die PowerShell als Administrator und führe den folgenden Befehl aus:

    ```shell
    Set-ExecutionPolicy RemoteSigned -Scope CurrentUser
    ```

    Schließe anschließend die PowerShell und öffne sie erneut.

  </TabItem>
</Tabs>

### Port bereits belegt (`EADDRINUSE`)

Wenn du versuchst, deinen Entwicklungsserver zu starten (z. B. mit `npm start` oder `npm run dev`), und eine Fehlermeldung mit `EADDRINUSE` erhältst, bedeutet das, dass der Port (oft 3000 oder 8080) bereits von einem anderen Programm verwendet wird.

**Lösung:**

Schließe andere Terminal-Fenster, in denen vielleicht noch ein Server läuft.

**Prozess beenden:**
Du kannst den blockierenden Prozess beenden. Am einfachsten geht das mit `npx`:

```shell
npx kill-port 3000
```

(Ersetze `3000` durch den Port, der in der Fehlermeldung steht).

Alternativ kannst du es manuell machen:

<Tabs>
  <TabItem label="macOS">
   <Steps>

1.  Finde die Prozess-ID (PID) heraus:

    ```shell
    lsof -i :3000
    ```

2.  Beende den Prozess (ersetze `<PID>` mit der Nummer aus der Spalte `PID`):

    ```shell
    kill -9 <PID>
    ```

   </Steps>
  </TabItem>
  <TabItem label="Windows">
   <Steps>

1.  Finde die Prozess-ID (PID) heraus:

    ```shell
    netstat -ano | findstr :3000
    ```

2.  Beende den Prozess (ersetze `<PID>` mit der Nummer ganz rechts in der Zeile):

    ```shell
    taskkill /PID <PID> /F
    ```

   </Steps>
  </TabItem>
</Tabs>

### Abhängigkeitskonflikte (`ERESOLVE`)

Manchmal können sich verschiedene Pakete nicht auf eine gemeinsame Version einer Abhängigkeit einigen. Du siehst dann einen Fehler, der mit `ERESOLVE unable to resolve dependency tree` beginnt.

**Lösung:**

- Versuche den Befehl mit dem Zusatz `--legacy-peer-deps` auszuführen:
  ```shell
  npm install --legacy-peer-deps
  ```
- Überprüfe deine `package.json` auf widersprüchliche Versionen.

### Kompilierungsfehler (`gyp ERR` / `node-gyp`)

Manchmal schlägt die Installation von npm-Paketen fehl und du siehst rote Fehlermeldungen, die `gyp ERR!` oder `node-gyp` enthalten.

**Das Problem:**
Manche Pakete (z. B. für Bildbearbeitung oder Hardware-Zugriff) nutzen Code, der in C oder C++ geschrieben ist. Dafür fehlt dir wahrscheinlich der Compiler.

**Die Lösung (nur macOS):**
Du brauchst die **Xcode Command Line Tools**.

<Steps>

1.  Öffne dein Terminal.

2.  Führe diesen Befehl aus:

    ```shell
    xcode-select --install
    ```

3.  Folge den Anweisungen.

</Steps>

**Falls das nicht klappt (z. B. bei älteren macOS-Versionen):**

<Steps>

1.  Gehe auf [Apple Developer Downloads](https://developer.apple.com/download/all/?q=Command%20Line%20Tools).

2.  Melde dich mit deiner Apple-ID an.

3.  Suche nach „Command Line Tools“ passend zu deiner macOS-Version und installiere sie.

</Steps>

<Aside>
  `node-gyp`-Fehler treten gern auch nur im integrierten Terminal von VS Code
  auf. Siehe dazu unten [Fehler in VS Code](#fehler-in-vscode).
</Aside>

## Visual Studio Code

### Fehler im integrierten Terminal (Apple Silicon)

Ein frustrierendes, aber bekanntes Phänomen: Im normalen Terminal funktioniert `npm install` problemlos, aber im integrierten Terminal von VS Code hagelt es rote Fehlermeldungen (oft `node-gyp` oder `gyp ERR`).

**Die Ursache:**

Auf Macs mit Apple Silicon (M1, M2, M3) kann es passieren, dass VS Code im „Rosetta-Modus“ (für Intel-Chips) läuft, während dein System und Node.js nativ auf `arm64` laufen. Dieser Architektur-Mix führt zu Fehlern beim Kompilieren.

**Die Lösung:**

Prüfe im Terminal durch die Eingabe von `arch`, ob VS Code im falschen Modus läuft. Erscheint `i386`, musst du die Einstellung ändern:

<Steps>

1. Beende VS Code vollständig.

2. Öffne den Finder und gehe zu „Programme“.

3. Rechtsklick auf „Visual Studio Code“ > „Informationen“.

4. Entferne den Haken bei **„Mit Rosetta öffnen“**.

</Steps>

<Aside title='Workaround'>
  Falls es schnell gehen muss: Führe `npm install` einfach im normalen
  Mac-Terminal aus. Sobald die Installation fertig ist, kannst du in VS Code wie
  gewohnt weiterarbeiten.
</Aside>

### Fehlende Pfade & falsche Shell (VS Code)

Wenn `node-gyp` Fehler wirft, liegt das oft daran, dass es Python nicht findet. Das passiert, wenn VS Code nicht alle Umgebungsvariablen (PATH) lädt oder die falsche Shell nutzt.

**Prüfung:**

Gib in beiden Terminals (VS Code und Mac Terminal) folgenden Befehl ein:

```shell
which python3
```

Wenn VS Code "not found" oder einen anderen Pfad als das normale Terminal anzeigt, fehlt die Verknüpfung.

**Lösung 1: Umgebungsvariablen erben**

<Steps>

1.  Öffne die Einstellungen (`Cmd + ,`).

2.  Suche nach `terminal.integrated.inheritEnv` und aktiviere es.

</Steps>

**Lösung 2: Die richtige Shell (zsh) einstellen**
Wenn du Node.js mit Homebrew installiert hast, sind die Pfade meist in der `zsh` konfiguriert.

<Steps>

1.  Öffne die Befehlspalette (`Cmd + Shift + P`).

2.  Suche nach `Terminal: Select Default Profile`.

3.  Wähle **zsh** aus.

</Steps>

**Lösung 3: Tools-Pfad zurücksetzen**
Falls immer noch Tools fehlen, hilft oft dieser Befehl im VS Code Terminal:

```shell
sudo xcode-select --reset
```

## Probleme mit dem Starterkit

Auch wenn du mit dem [Starterkit](/starterkit/intro) arbeitest, können Probleme auftreten.

### Fehler beim Anlegen einer Kopie

Wenn du Beispieldateien von deinem Dozenten oder aus einem anderen Projekt kopierst (z. B. für Übungen mit Parcel, Astro oder anderen Tools), solltest du ausschließlich das `src`-Verzeichnis und die `package.json` übernehmen. Kopiere niemals die Verzeichnisse `node_modules`, `.parcel-cache`, `.yarn`, oder Dateien wie `package-lock.json`, `yarn.lock`, `pnpm-lock.yaml` mit.

**Vorgehen:**

<Steps>

1.  Kopiere das `src`-Verzeichnis und die `package.json` in dein neues Projektverzeichnis.

2.  Lösche alle Lock-Dateien (`package-lock.json`, `yarn.lock`, `pnpm-lock.yaml`) und Caches (`node_modules`, `.parcel-cache`, `.yarn`).

3.  Installiere die Abhängigkeiten neu:

    ```shell
    npm install
    ```

</Steps>

Dadurch werden alle benötigten Pakete passend zu deiner Umgebung frisch installiert und du vermeidest Versionskonflikte oder Fehler durch alte Abhängigkeiten.
